(this["webpackJsonpmy-favorite-pictures"]=this["webpackJsonpmy-favorite-pictures"]||[]).push([[0],{23:function(e,t,c){},26:function(e,t,c){"use strict";c.r(t);var n=c(2),a=c(1),r=c.n(a),i=c(16),s=c.n(i),o=(c(23),c(7)),u=c(14),l={apiKey:"AIzaSyAmtFn9QcoAV7z528C-i2NxoBEoSDjRh4w",authDomain:"firegram-83420.firebaseapp.com",projectId:"firegram-83420",storageBucket:"firegram-83420.appspot.com",messagingSenderId:"633373084223",appId:"1:633373084223:web:8cf01473d160a2309c468a"},j=c(11);c(27),c(28);j.a.initializeApp(l);var d=j.a.storage(),b=j.a.firestore(),f=j.a.firestore.FieldValue.serverTimestamp,m=function(e){var t=Object(a.useState)([]),c=Object(o.a)(t,2),n=c[0],r=c[1];return Object(a.useEffect)((function(){var t=b.collection(e).orderBy("createdAt","desc").onSnapshot((function(e){var t=[];e.forEach((function(e){t.push(Object(u.a)(Object(u.a)({},e.data()),{},{id:e.id}))})),r(t)}));return function(){return t()}}),[e]),{docs:n}},O=c(10),p=function(e){var t=e.docs,c=e.setSelectedImg;return Object(n.jsx)("div",{className:"img-grid",children:t&&t.map((function(e){return Object(n.jsx)(O.a.div,{className:"img-wrap",onClick:function(){return c(e.url)},layout:!0,whileHover:{opacity:1},children:Object(n.jsx)(O.a.img,{src:e.url,alt:""})},e.id)}))})},g=r.a.memo(p),h=function(e){var t=e.selectedImg,c=e.setSelectedImg;return Object(n.jsx)(O.a.div,{className:"backdrop",onClick:function(e){e.target.classList.contains("backdrop")&&c(null)},initial:{opacity:0,y:"-100vh"},animate:{opacity:1,y:0},children:Object(n.jsx)(O.a.img,{src:t,alt:""})})},v=function(){var e=Object(a.useState)(null),t=Object(o.a)(e,2),c=t[0],r=t[1],i=m("images").docs;return Object(n.jsxs)(a.Fragment,{children:[Object(n.jsx)(g,{docs:i,setSelectedImg:r}),c&&Object(n.jsx)(h,{selectedImg:c,setSelectedImg:r})]})},x=function(){return Object(n.jsxs)("div",{className:"title",children:[Object(n.jsx)("h1",{children:"My Favorite Pictures"}),Object(n.jsx)("h2",{children:"Add a new one"})]})},y=c(13),S=c.n(y),w=c(17),I=function(e){var t=Object(a.useState)(0),c=Object(o.a)(t,2),n=c[0],r=c[1],i=Object(a.useState)(null),s=Object(o.a)(i,2),u=s[0],l=s[1],j=Object(a.useState)(null),m=Object(o.a)(j,2),O=m[0],p=m[1];return Object(a.useEffect)((function(){var t=d.ref(e.name),c=b.collection("images");t.put(e).on("state_changed",(function(e){var t=e.bytesTransferred/e.totalBytes*100;r(t)}),(function(e){l(e)}),Object(w.a)(S.a.mark((function e(){var n,a;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getDownloadURL();case 2:return n=e.sent,p(n),a=f(),e.next=7,c.add({url:n,createdAt:a});case 7:case"end":return e.stop()}}),e)}))))}),[e]),{progress:n,error:u,url:O}},F=function(e){var t=e.file,c=e.setFile,r=I(t),i=r.progress,s=r.url;return Object(a.useEffect)((function(){s&&c(null)}),[s,c]),Object(n.jsx)(O.a.div,{className:"progress-bar",initial:{width:0},animate:{width:i+"%"}})},N=function(){var e=Object(a.useState)(null),t=Object(o.a)(e,2),c=t[0],r=t[1],i=Object(a.useState)(null),s=Object(o.a)(i,2),u=s[0],l=s[1];return Object(n.jsxs)("form",{children:[Object(n.jsxs)("label",{children:[Object(n.jsx)("input",{type:"file",onChange:function(e){var t=e.target.files[0];t&&["image/png","image/jpeg"].includes(t.type)?(r(t),l("")):(r(null),l("Please choose an image file"))}}),Object(n.jsx)("span",{children:"+"})]}),Object(n.jsxs)("div",{className:"output",children:[c&&Object(n.jsx)("div",{children:c.name}),Object(n.jsx)("div",{className:"error",children:u}),c&&Object(n.jsx)(F,{file:c,setFile:r})]})]})};var k=function(){return Object(n.jsxs)("div",{className:"App",children:[Object(n.jsx)(x,{}),Object(n.jsx)(N,{}),Object(n.jsx)(v,{})]})},A=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,30)).then((function(t){var c=t.getCLS,n=t.getFID,a=t.getFCP,r=t.getLCP,i=t.getTTFB;c(e),n(e),a(e),r(e),i(e)}))};s.a.render(Object(n.jsx)(r.a.StrictMode,{children:Object(n.jsx)(k,{})}),document.getElementById("root")),A()}},[[26,1,2]]]);
//# sourceMappingURL=main.e19ea6db.chunk.js.map